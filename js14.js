// script.js

// ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á (Story Flow)
const storySteps = [
    // START
    { type: 'text', content: '‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏î‡πÑ‡∏ü‡∏Å‡∏±‡∏ö‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï' },
    { type: 'text', content: '‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ñ‡πà‡∏ß‡∏±‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‡∏≠‡∏µ‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡πÉ‡∏Ñ‡∏£‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô...' },
    
    // DREAM INPUT (Q1) - **‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏û‡∏π‡∏î**
    { type: 'input', content: '‡πÄ‡∏ò‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£? ‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏ü‡∏±‡∏á‡πÑ‡∏î‡πâ‡∏ô‡∏∞', inputId: 'dream' },
    { type: 'text', content: '‡∏ß‡πâ‡∏≤‡∏ß! ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏≥‡∏°‡∏±‡∏ô‡∏°‡∏´‡∏±‡∏®‡∏à‡∏£‡∏£‡∏¢‡πå‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢‡∏ô‡∏∞' },
    { type: 'text', content: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏≠‡∏±‡∏ô‡∏¢‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï' },
    
    // EXHAUSTION INPUT (Q2) - **‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏û‡∏π‡∏î**
    { type: 'text', content: '‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ... ‡πÄ‡∏ò‡∏≠‡πÄ‡∏à‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏∏‡∏Å‡∏Ç‡πå‡πÉ‡∏à‡∏°‡∏±‡πâ‡∏¢?' },
    { type: 'input', content: '‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡πÄ‡∏ò‡∏≠‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡πâ‡∏≠‡πÅ‡∏ó‡πâ‡∏Å‡∏±‡∏ö‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï... ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏°‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏£‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏ü‡∏±‡∏á', inputId: 'exhaustion' }, 
    
    // EMPATHY - **‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏û‡∏π‡∏î**
    { type: 'text', content: '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡πÑ‡∏ß‡πâ‡πÉ‡∏à‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏ü‡∏±‡∏á ‡πÄ‡∏ò‡∏≠‡∏Ñ‡∏á‡πÅ‡∏ö‡∏Å‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ô‡∏µ‡πâ‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏°‡∏≤‡∏ï‡∏•‡∏≠‡∏î‡∏™‡∏¥‡∏ô‡∏∞' },
    { type: 'text', content: '‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡πÄ‡∏ò‡∏≠‡πÄ‡∏≠‡∏á' },
    { type: 'text', content: '‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏ó‡πâ‡∏≠‡πÅ‡∏ó‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏´‡∏°‡∏î‡πÅ‡∏£‡∏á' },
    { type: 'text', content: '‡πÄ‡∏ò‡∏≠‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ù‡∏∑‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏´‡∏£‡∏≠‡∏Å‡∏ô‡∏∞' },
    { type: 'text', content: '‡πÄ‡∏ò‡∏≠‡∏•‡∏≠‡∏á‡πÅ‡∏´‡∏á‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≠‡∏á‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏î‡∏π‡∏™‡∏¥...' },
    
    // CHOICE: SKY (Q3)
    { 
        type: 'choice', 
        content: '‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á?', 
        choices: [
            { text: '1. ‡πÅ‡∏î‡∏î‡∏à‡πâ‡∏≤ ‚òÄÔ∏è', value: 'sun', nextStep: 14 },
            { text: '2. ‡∏ù‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏ï‡∏Å/‡∏ï‡∏Å‡∏≠‡∏¢‡∏π‡πà üåßÔ∏è', value: 'rain', nextStep: 14 },
            { text: '3. ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏™‡∏î‡πÉ‡∏™/‡∏Ñ‡∏£‡∏∂‡πâ‡∏°‡πÜ ‚ú®', value: 'clear', nextStep: 14 }
        ],
        inputId: 'sky'
    },
    
    // CHOICE: FEELING (Q4)
    { 
        type: 'choice', 
        content: '‡πÄ‡∏ò‡∏≠‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏±‡πâ‡∏¢?', 
        choices: [
            { text: '1. ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ üòä', value: 'better', nextStep: 15 },
            { text: '2. ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡∏¢ ü•∫', value: 'not_better', nextStep: 15 }
        ],
        inputId: 'feel'
    },
    
    // SKY COMPARISON
    { type: 'text', content: '‡πÄ‡∏´‡πá‡∏ô‡∏°‡∏±‡πâ‡∏¢... ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏£‡∏≠‡∏Å' }, 
    { type: 'text', content: '‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡πá‡∏°‡∏µ‡πÅ‡∏î‡∏î‡∏≠‡∏≠‡∏Å' },
    { type: 'text', content: '‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡πá‡∏õ‡∏Å‡∏Ñ‡∏•‡∏∏‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏°‡πá‡∏î‡∏ù‡∏ô' },
    { type: 'text', content: '‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏Å‡πá‡∏™‡∏î‡πÉ‡∏™' },
    
    // SELF-COMPARISON
    { type: 'text', content: '‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏ò‡∏≠‡πÄ‡∏≠‡∏á...' },
    { type: 'text', content: '‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡πá‡∏°‡∏µ‡πÄ‡∏®‡∏£‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏á' },
    { type: 'text', content: '‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡πá‡∏°‡∏µ‡∏£‡πâ‡∏≠‡∏á‡πÑ‡∏´‡πâ‡∏ö‡πâ‡∏≤‡∏á' },
    { type: 'text', content: '‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏Å‡πá‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å' },
    
    // FINAL BOOST
    { type: 'text', content: '‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏Ñ‡∏¥‡∏î‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡πÄ‡∏•‡∏¢‡∏ô‡∏∞' },
    { type: 'text', content: '‡∏û‡∏±‡∏Å‡∏ö‡πâ‡∏≤‡∏á‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢' },
    { type: 'text', content: '‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ù‡∏∑‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ô‡∏∞' },
    { type: 'text', content: '‡∏´‡∏≤‡∏Ç‡∏≠‡∏á‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÜ‡∏Å‡∏¥‡∏ô ‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á' },
    { type: 'text', content: '‡πÄ‡∏£‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏ò‡∏≠‡∏à‡∏∞‡∏Å‡πâ‡∏≤‡∏ß‡∏ú‡πà‡∏≤‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô' },
    { type: 'text', content: '‡∏™‡∏π‡πâ‡πÜ ‡∏ô‡∏∞ ‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ¬†' }, 

    // FINAL BUTTON
    { type: 'final_button', content: '‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à' }
];

let currentStepIndex = 0;
let userResponses = {}; 
let appContent;
let clickOverlay;
let mainContainer;

// ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ä‡∏£‡πå (‡∏™‡∏∏‡πà‡∏°)
const shareQuotes = [
    "‚Äú‡πÄ‡∏ò‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ô‡∏∞ ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏ò‡∏≠‡πÄ‡∏™‡∏°‡∏≠‚Äù",
    "‚Äú‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ù‡∏∑‡∏ô‡∏´‡∏£‡∏≠‡∏Å‡∏ô‡∏∞ ‡∏û‡∏±‡∏Å‡∏ö‡πâ‡∏≤‡∏á‡∏ô‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á‚Äù",
    "‚Äú‡∏¢‡∏¥‡πâ‡∏°‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ ‡∏ô‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á! ‡πÄ‡∏£‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏ò‡∏≠‡∏à‡∏∞‡∏Å‡πâ‡∏≤‡∏ß‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏±‡∏ô‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏î‡∏µ‚Äù",
    "‚Äú‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢ ‡πÄ‡∏ò‡∏≠‡πÄ‡∏≠‡∏á‡∏Å‡πá‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏®‡∏£‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡∏Ç‡πÑ‡∏î‡πâ‚Äù",
    "‚Äú‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÅ‡∏Ñ‡πà‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Å‡πá‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡πâ‡∏ß‚Äù", 
    "‚Äú‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏ó‡πâ‡∏≠ ‡πÅ‡∏ï‡πà‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏´‡∏°‡∏î‡∏´‡∏ß‡∏±‡∏á‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏•‡∏¢‡∏ô‡∏∞‚Äù" ,
    "‚Äú‡πÄ‡∏ò‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏î‡∏¥‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏£‡∏≠‡∏Å ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏≠‡∏≤‡πÉ‡∏à‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‚Äù",
    "‚Äú‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ò‡∏≠‡∏ó‡∏≥‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡πÅ‡∏°‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏ï‡πà‡∏°‡∏±‡∏ô‡∏û‡∏≤‡πÄ‡∏ò‡∏≠‡πÑ‡∏õ‡∏™‡∏π‡πà‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÑ‡∏î‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‚Äù",
    "‚Äú‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ ‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‚Äù",
    "‚Äú‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞‚Ä¶‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏Ñ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤‡πÑ‡∏î‡πâ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏Å‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß‚Äù",
    "‚Äú‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ä‡πâ‡∏≤ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏ô‡∏Å‡πá‡∏¢‡∏±‡∏á‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á‚Äù",
    "‚Äú‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡πÄ‡∏Å‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡πÅ‡∏Ñ‡πà‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏Å‡πá‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‚Äù",
    "‚Äú‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡πÉ‡∏Ñ‡∏£ ‡πÄ‡∏î‡∏¥‡∏ô‡πÉ‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏Å‡πá‡∏û‡∏≠‚Äù",
    "‚Äú‡∏≠‡∏¢‡πà‡∏≤‡πÇ‡∏ó‡∏©‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‚Ä¶‡πÉ‡∏Ñ‡∏£‡πÜ ‡∏Å‡πá‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‚Äù",
    "‚Äú‡πÅ‡∏°‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏±‡∏ô‡∏´‡∏ô‡∏±‡∏Å ‡πÅ‡∏ï‡πà‡∏ó‡∏∏‡∏Å‡∏¢‡πà‡∏≤‡∏á‡∏Å‡πâ‡∏≤‡∏ß‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏°‡∏≠‚Äù",
    "‚Äú‡πÄ‡∏ò‡∏≠‡∏≠‡∏≤‡∏à‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏ï‡πà‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‚Äù",
    "‚Äú‡∏ó‡πâ‡∏≠‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏´‡∏°‡∏î‡∏´‡∏ß‡∏±‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏¢‡∏±‡∏á‡∏£‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‚Äù",
    "‚Äú‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏ò‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏à‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‚Ä¶‡πÄ‡∏ò‡∏≠‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‚Äù"
];
          
function getRandomShareQuote() {
    const index = Math.floor(Math.random() * shareQuotes.length);
    return shareQuotes[index];
}

// -------------------------------------
// Function: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
// -------------------------------------
// üìå ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô Global ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ HTML (‡πÉ‡∏ô index.html) ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ
window.handleInputSubmission = function(inputId, nextStepIndex) {
    const inputElement = document.getElementById(inputId);
    
    if (!inputElement || inputElement.value.trim() === '') {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞');
        return;
    }

    userResponses[inputId] = inputElement.value.trim();
    goToNextStep(nextStepIndex);
}

window.handleChoiceSubmission = function(inputId, value, nextStepIndex) {
    userResponses[inputId] = value;
    goToNextStep(nextStepIndex);
}

window.shareToClipboard = function(text) {
    if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
            alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! ‡∏ô‡∏≥‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô Story ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üòâ');
        }).catch(err => {
            prompt("‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ä‡∏£‡πå (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á):", text);
        });
    } else {
        prompt("‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ä‡∏£‡πå (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á):", text);
    }
}


function renderStep(step) {
    let htmlContent = '';
    
    const isClickable = step.type === 'text' || step.type === 'final_button';
    if (isClickable) {
        clickOverlay.style.display = 'block';
        mainContainer.classList.add('clickable');
    } else {
        clickOverlay.style.display = 'none';
        mainContainer.classList.remove('clickable');
    }

    if (step.type === 'text') {
        htmlContent = `<p class="main-text">${step.content}</p>`;
    } 
    else if (step.type === 'input') {
        // **‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏´‡πâ Input Text ‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏¥‡∏ï‡∏£‡∏Ç‡∏∂‡πâ‡∏ô**
        htmlContent = `
            <p class="main-text" style="font-size: 1.8rem;">${step.content}</p>
            <div class="input-area">
                <textarea id="${step.inputId}" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." autofocus></textarea>
            </div>
            <button class="button-primary" onclick="window.handleInputSubmission('${step.inputId}', ${currentStepIndex + 1})">‡πÑ‡∏õ‡∏ï‡πà‡∏≠</button>
        `;
    }
    else if (step.type === 'choice') {
        let optionsHtml = step.choices.map(choice => 
            // üìå ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ window.handleChoiceSubmission()
            `<button class="option-button" onclick="window.handleChoiceSubmission('${step.inputId}', '${choice.value}', ${choice.nextStep || currentStepIndex + 1})">${choice.text}</button>`
        ).join('');
        
        htmlContent = `
            <p class="main-text" style="font-size: 1.8rem;">${step.content}</p>
            <div class="option-button-group">${optionsHtml}</div>
        `;
    }
    else if (step.type === 'final_button') {
        htmlContent = `
            <p class="main-text" style="font-size: 1.8rem;">‡∏¢‡∏¥‡πâ‡∏°‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ ‡∏ô‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á üòä</p> 
            <button class="button-primary" onclick="showFinalScreen()">‡∏£‡∏±‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏≤</button>
        `;
        clickOverlay.style.display = 'none'; 
    }
    else if (step.type === 'final') {
        showFinalScreen();
        return;
    }

    appContent.innerHTML = htmlContent;
}

// -------------------------------------
// Function: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (‡∏û‡∏£‡πâ‡∏≠‡∏° Animation)
// -------------------------------------
function goToNextStep(nextIndex) {
    const nextStepIndex = nextIndex !== undefined ? nextIndex : currentStepIndex + 1;

    if (nextStepIndex >= storySteps.length) {
        if (storySteps[storySteps.length - 1].type !== 'final_button') {
            currentStepIndex = storySteps.length - 1; 
            renderStep(storySteps[currentStepIndex]);
            appContent.classList.add('visible');
            return;
        }
        return;
    }

    appContent.classList.remove('visible'); 

    setTimeout(() => {
        currentStepIndex = nextStepIndex;
        renderStep(storySteps[currentStepIndex]);
        appContent.classList.add('visible'); 
    }, 500); 
}

// -------------------------------------
// Function: ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ (‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à + ‡πÅ‡∏ä‡∏£‡πå)
// -------------------------------------
function showFinalScreen() {
    const finalQuote = getRandomShareQuote();
    const shareText = `‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏â‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ: ${finalQuote} #‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏à #‡∏™‡∏π‡πâ‡∏ï‡πà‡∏≠‡πÑ‡∏õ #‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏Ñ‡∏∏‡∏ì`;
    
    clickOverlay.style.display = 'none'; 
    mainContainer.classList.remove('clickable');

    appContent.classList.remove('visible'); 

    setTimeout(() => {
        // ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢ - **‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£**
        const letterContent = `
            <p style="font-weight: 600; font-size: 1.3rem;">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ô‡πÄ‡∏Å‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ üíñ</p>
            <p>‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ü‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏ò‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞</p>
            <p>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏≠‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤</p>
            <p><strong>‡∏à‡∏≥‡πÑ‡∏ß‡πâ‡∏ß‡πà‡∏≤: ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏µ‡∏™‡∏±‡∏ô ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ñ‡∏∏‡∏ì‡∏Å‡πá‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô</strong></p>
            `;
        
        appContent.innerHTML = `
            <p class="main-text" style="font-size: 1.5rem; min-height: auto;">‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏≤</p>
            <div class="letter-box">
                ${letterContent}
                <p style="font-weight: 600; margin-top: 15px;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏û‡∏¥‡πÄ‡∏®‡∏©: ${finalQuote}</p>
            </div>
            <button class="button-primary" onclick="window.shareToClipboard('${shareText}')">
                ‡πÅ‡∏ä‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏à‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏•‡∏á Story üìã
            </button>
        `;
        appContent.classList.add('visible');
    }, 500);
}


// -------------------------------------
// Function: ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠ DOM ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
// -------------------------------------
document.addEventListener('DOMContentLoaded', (event) => {
    appContent = document.getElementById('app-content');
    clickOverlay = document.getElementById('click-overlay');
    mainContainer = document.getElementById('main-container');

    // ‡∏ú‡∏π‡∏Å Event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
    clickOverlay.addEventListener('click', () => {
        // ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô 'text' ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
        if (storySteps[currentStepIndex].type === 'text') {
            goToNextStep();
        }
    });

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å
    renderStep(storySteps[currentStepIndex]);
    appContent.classList.add('visible'); 
});